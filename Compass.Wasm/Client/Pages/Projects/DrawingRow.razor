@using Compass.Wasm.Shared.Projects
@inject NavigationManager NavigationManager
@inject IJSRuntime JsRuntime
<tr>
    <td>
        <AuthorizeView Roles="admin,pm">
            <Authorized>
                <a href="drawing/update/@Drawing.Id">
                    <span class="oi oi-cog"></span>
                </a>
            </Authorized>
        </AuthorizeView>
        @Drawing.ItemNumber
    </td>
    <td>
        @if (!string.IsNullOrWhiteSpace(Drawing.DrawingUrl))
        {
            @foreach (var fileUrl in Drawing.DrawingUrl.Split('\n'))
            {
                <a href="@fileUrl" target="_blank">
                    <span class="oi oi-paperclip me-2">PDF</span>
                </a>
            }
        }
    </td>
    <td>
        <span @onclick="Show" hidden="@(string.IsNullOrWhiteSpace(Drawing.ImageUrl))">@(showImage ? "▲" : "▼")</span>
    </td>
</tr>
@if (showImage)
{
    <tr>
        <td colspan="3">
            <img src="@Drawing.ImageUrl" asp-append-version="true" height="300px" />
        </td>
    </tr>
}
@code {
    [Parameter]
    public DrawingDto Drawing { get; set; }
    private bool showImage = false;
    private void Show()
    {
        showImage = !showImage;
    }
}
